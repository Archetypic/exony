From 6f135ed88734d5b6b090dcedcc4978cad9bfae99 Mon Sep 17 00:00:00 2001
From: Nikolay Orlyuk <virkony@gmail.com>
Date: Sat, 7 Jul 2012 20:53:25 +0300
Subject: [PATCH 2/3] Allow /usr/lib64 override (bug259)

Many linux distributives uses /usr/lib64 for amd64 libraries and
/usr/lib32 for x86. To support those this change allows to override
/usr/lib with standart libdir var in autoconf.

See http://bugs.mercury.csse.unimelb.edu.au/view.php?id=259
---
 scripts/Mmake.vars.in | 28 ++++++++++++++++------------
 1 file changed, 16 insertions(+), 12 deletions(-)

diff --git a/scripts/Mmake.vars.in b/scripts/Mmake.vars.in
index f808d21..e5d782a 100644
--- a/scripts/Mmake.vars.in
+++ b/scripts/Mmake.vars.in
@@ -691,26 +691,30 @@ else
     DESTDIR_AND_SLASH=$(DESTDIR)/
 endif
 
-INSTALL_PREFIX		= $(DESTDIR_AND_SLASH)@prefix@
+prefix = @prefix@
+exec_prefix = @exec_prefix@
+libdir = @libdir@
+
+INSTALL_PREFIX		= $(DESTDIR_AND_SLASH)$(prefix)
 INSTALL_BINDIR		= $(INSTALL_PREFIX)/bin
-INSTALL_LIBDIR		= $(INSTALL_PREFIX)/lib/mercury
+INSTALL_LIBDIR		= $(DESTDIR_AND_SLASH)$(libdir)/mercury
 INSTALL_INFO_DIR	= $(INSTALL_PREFIX)/info
-INSTALL_DVI_DIR		= $(INSTALL_PREFIX)/lib/mercury/doc
-INSTALL_TEXT_DIR	= $(INSTALL_PREFIX)/lib/mercury/doc
-INSTALL_PS_DIR		= $(INSTALL_PREFIX)/lib/mercury/doc
-INSTALL_PDF_DIR		= $(INSTALL_PREFIX)/lib/mercury/doc
+INSTALL_DVI_DIR		= $(INSTALL_LIBDIR)/doc
+INSTALL_TEXT_DIR	= $(INSTALL_LIBDIR)/doc
+INSTALL_PS_DIR		= $(INSTALL_LIBDIR)/doc
+INSTALL_PDF_DIR		= $(INSTALL_LIBDIR)/doc
 INSTALL_MAN_DIR		= $(INSTALL_PREFIX)/man
-INSTALL_HTML_DIR	= $(INSTALL_PREFIX)/lib/mercury/html
-INSTALL_MDB_DOC_DIR	= $(INSTALL_PREFIX)/lib/mercury/mdb
-INSTALL_ELISP_DIR	= $(INSTALL_PREFIX)/lib/mercury/elisp
+INSTALL_HTML_DIR	= $(INSTALL_LIBDIR)/html
+INSTALL_MDB_DOC_DIR	= $(INSTALL_LIBDIR)/mdb
+INSTALL_ELISP_DIR	= $(INSTALL_LIBDIR)/elisp
 INSTALL_CGI_DIR		= $(DESTDIR_AND_SLASH)@CGIDIR@
 
-FINAL_INSTALL_PREFIX	= @prefix@
+FINAL_INSTALL_PREFIX	= $(prefix)
 FINAL_INSTALL_BINDIR 	= $(FINAL_INSTALL_PREFIX)/bin
-FINAL_INSTALL_LIBDIR	= $(FINAL_INSTALL_PREFIX)/lib/mercury
+FINAL_INSTALL_LIBDIR	= $(libdir)/mercury
 FINAL_INSTALL_INFO_DIR	= $(FINAL_INSTALL_PREFIX)/info
 FINAL_INSTALL_MAN_DIR	= $(FINAL_INSTALL_PREFIX)/man
-FINAL_INSTALL_ELISP_DIR	= $(FINAL_INSTALL_PREFIX)/lib/mercury/elisp
+FINAL_INSTALL_ELISP_DIR	= $(FINAL_INSTALL_LIBDIR)/elisp
 FINAL_INSTALL_CGI_DIR	= @CGIDIR@
 
 # You should not need to override anything below here
-- 
1.8.0.3

